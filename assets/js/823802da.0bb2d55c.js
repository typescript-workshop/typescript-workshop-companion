"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[259],{4261:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"atelier/filtrer-des-lignes","title":"Exercice 6","description":"\xcatre capable de selectionner des lignes c\'est bien, mais pouvoir les filtrer \xe7a serait canon, qu\'en pensez-vous ?","source":"@site/docs/atelier/6-filtrer-des-lignes.md","sourceDirName":"atelier","slug":"/atelier/filtrer-des-lignes","permalink":"/typescript-workshop-companion/docs/atelier/filtrer-des-lignes","draft":false,"unlisted":false,"editUrl":"https://github.com/typescript-workshop/typescript-workshop-companion/tree/main/packages/create-docusaurus/templates/shared/docs/atelier/6-filtrer-des-lignes.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"Exercice 5","permalink":"/typescript-workshop-companion/docs/atelier/selectionner-tous-les-champs"},"next":{"title":"Exercice 7","permalink":"/typescript-workshop-companion/docs/atelier/supprimer-des-lignes"}}');var t=i(4848),r=i(8453);const o={sidebar_position:6},l="Exercice 6",c={},d=[{value:"Indice 1",id:"indice-1",level:2},{value:"Indice 2",id:"indice-2",level:2},{value:"Indice 3",id:"indice-3",level:2},{value:"Solution",id:"solution",level:2}];function a(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components},{Details:i}=n;return i||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"exercice-6",children:"Exercice 6"})}),"\n",(0,t.jsx)(n.p,{children:"\xcatre capable de selectionner des lignes c'est bien, mais pouvoir les filtrer \xe7a serait canon, qu'en pensez-vous ?"}),"\n",(0,t.jsx)(n.p,{children:"C'est partit impl\xe9mentons une clause \"where\" ! L'objectif de cet exercice est d'\xe0 partir du typage actuel de le faire \xe9voluer afin de pouvoir filtrer en fonction de crit\xe8res d\xe9finis.\nPar exemple dans les tests nous nous amuserons \xe0 filtrer sur la date de naissance ou encore le pr\xe9nom des utilisateurs."}),"\n",(0,t.jsxs)(n.p,{children:["Rendez-vous dans le fichier ",(0,t.jsx)(n.code,{children:"6-filtrer-des-lignes.spec-d.ts"})," et ",(0,t.jsx)(n.code,{children:"db.ts"})," pour l'impl\xe9mentation."]}),"\n",(0,t.jsx)(n.p,{children:"\xc0 vous de jouer !"}),"\n",(0,t.jsx)(n.admonition,{title:"Ressources",type:"tip",children:(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/typescript-workshop-companion/docs/typescript/keyof-lookup",children:"KeyOf & lookup"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/typescript-workshop-companion/docs/typescript/conditional-types",children:"Types conditionnels"})}),"\n"]})}),"\n",(0,t.jsx)(n.h2,{id:"indice-1",children:"Indice 1"}),"\n",(0,t.jsxs)(i,{children:[(0,t.jsx)("summary",{children:"Avant de d\xe9plier pour afficher la solution, n'h\xe9sitez pas \xe0 nous solliciter ! "}),(0,t.jsxs)(n.p,{children:["La signature de ",(0,t.jsx)(n.code,{children:"where"})," d\xe9pend d'un type de contexte (en l'occurence de ",(0,t.jsx)(n.em,{children:"s\xe9lection"})," dans une ",(0,t.jsx)(n.em,{children:"table"})," d'une base de donn\xe9e arbitraire) et d'un type de champ (qui d\xe9pend de la table cibl\xe9e)"]})]}),"\n",(0,t.jsx)(n.h2,{id:"indice-2",children:"Indice 2"}),"\n",(0,t.jsxs)(i,{children:[(0,t.jsx)("summary",{children:"Avant de d\xe9plier pour afficher la solution, n'h\xe9sitez pas \xe0 nous solliciter ! "}),(0,t.jsxs)(n.p,{children:["Pour le moment nous n'impl\xe9mentons qu'une clause d'\xe9galit\xe9, un type litt\xe9ral devrait faire l'affaire pour l'argument ",(0,t.jsx)(n.code,{children:"operator"})," !"]})]}),"\n",(0,t.jsx)(n.h2,{id:"indice-3",children:"Indice 3"}),"\n",(0,t.jsxs)(i,{children:[(0,t.jsx)("summary",{children:"Avant de d\xe9plier pour afficher la solution, n'h\xe9sitez pas \xe0 nous solliciter ! "}),(0,t.jsxs)(n.p,{children:["Au final on va utiliser ici beaucoup de choses qu'on a d\xe9j\xe0 pu aborder: ",(0,t.jsx)(n.em,{children:"lookup types"}),", mots-cl\xe9 ",(0,t.jsx)(n.em,{children:"keyof"})," ou ",(0,t.jsx)(n.em,{children:"extends"}),"."]})]}),"\n",(0,t.jsx)(n.h2,{id:"solution",children:"Solution"}),"\n",(0,t.jsxs)(i,{children:[(0,t.jsx)("summary",{children:"Avant de d\xe9plier pour afficher la solution, n'h\xe9sitez pas \xe0 nous solliciter ! "}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:'export const where = <\n  Ctx extends AnySelectableContext,\n  Field extends keyof Ctx["_db"][Ctx["_table"]]\n>(\n  ctx: Ctx,\n  field: Field,\n  operator: "=",\n  value: Ctx["_db"][Ctx["_table"]][Field]\n) => ({\n  ...ctx,\n  _where: {\n    field,\n    operator,\n    value,\n  },\n});\n'})})]})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>l});var s=i(6540);const t={},r=s.createContext(t);function o(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);