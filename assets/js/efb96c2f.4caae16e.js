"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[60],{8161:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>c,default:()=>p,frontMatter:()=>o,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"atelier/opaque","title":"Exercice 1","description":"Probl\xe8me du typage structurel","source":"@site/docs/atelier/1-opaque.md","sourceDirName":"atelier","slug":"/atelier/opaque","permalink":"/typescript-workshop-companion/docs/atelier/opaque","draft":false,"unlisted":false,"editUrl":"https://github.com/typescript-workshop/typescript-workshop-companion/tree/main/packages/create-docusaurus/templates/shared/docs/atelier/1-opaque.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Exercice 0","permalink":"/typescript-workshop-companion/docs/atelier/types-primitifs"},"next":{"title":"Exercice 2","permalink":"/typescript-workshop-companion/docs/atelier/construire-le-contexte"}}');var i=n(4848),r=n(8453);const o={sidebar_position:1},c="Exercice 1",l={},a=[{value:"Probl\xe8me du typage structurel",id:"probl\xe8me-du-typage-structurel",level:2},{value:"Comment les types opaques peuvent ils nous aider ?",id:"comment-les-types-opaques-peuvent-ils-nous-aider-",level:2},{value:"Exercice",id:"exercice",level:2},{value:"Indice 1",id:"indice-1",level:2},{value:"Solution",id:"solution",level:2}];function d(e){const s={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components},{Details:n}=s;return n||function(e,s){throw new Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"exercice-1",children:"Exercice 1"})}),"\n",(0,i.jsx)(s.h2,{id:"probl\xe8me-du-typage-structurel",children:"Probl\xe8me du typage structurel"}),"\n",(0,i.jsx)(s.p,{children:"Rien ne ressemble plus \xe0 un id qu'un autre id"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-ts",children:"type UserId = string;\n\ntype CompanyId = string;\n"})}),"\n",(0,i.jsxs)(s.p,{children:["Dans l'exemple ci-dessus, m\xeame si nous cr\xe9ons des alias du type ",(0,i.jsx)(s.code,{children:"string"}),", pour mieux repr\xe9senter le m\xe9tier dans notre code, les types ",(0,i.jsx)(s.code,{children:"UserId"})," et ",(0,i.jsx)(s.code,{children:"CompanyId"})," sont interchangeables et le compilateur ne pourra pas vous pr\xe9venir d'erreurs potentielles."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-ts",children:'function getUser(userId: UserId) {\n  // some logic\n}\n\nconst id: CompanyId = "1be076b0-31f7-448e-a7c4-14f5b5dd0437";\ngetUser(id);\n'})}),"\n",(0,i.jsx)(s.p,{children:"L'exemple ci-dessus est compl\xe8tement valide \xe0 la compilation \ud83d\ude31.\nOn se doute bien que \xe7a ne va pas aussi bien se passer \xe0 l'ex\xe9cution..."}),"\n",(0,i.jsx)(s.h2,{id:"comment-les-types-opaques-peuvent-ils-nous-aider-",children:"Comment les types opaques peuvent ils nous aider ?"}),"\n",(0,i.jsxs)(s.p,{children:["Les types opaques (aussi connus sous le nom ",(0,i.jsx)(s.em,{children:"branded types"}),") permettent de cr\xe9er des types distincts pour que le compilateur puisse garantir la bonne utilisation de chaque type dans toute notre base de code \ud83d\udcaa"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-ts",children:'type UserId = Opaque<string, "user">;\n\ntype CompanyId = Opaque<string, "company">;\n\nfunction getUser(userId: UserId) {\n  // some logic\n}\n\nconst id = "1be076b0-31f7-448e-a7c4-14f5b5dd0437" as CompanyId;\ngetUser(id);\n//      ^? Argument of type \'CompanyId\' is not assignable to parameter of type \'UserId\'.\n'})}),"\n",(0,i.jsx)(s.h2,{id:"exercice",children:"Exercice"}),"\n",(0,i.jsxs)(s.p,{children:["La cr\xe9ation du type ",(0,i.jsx)(s.code,{children:"Opaque"})," n'est pas \xe9vidente et nous vous la donnons (c'est volontairement une version simplifi\xe9e pour ne pas vous embrouiller). Nous allons cr\xe9er un type utilitaire ",(0,i.jsx)(s.code,{children:"UUID"})," qui va se servir du type opaque."]}),"\n",(0,i.jsxs)(s.p,{children:["Rendez-vous dans le fichier ",(0,i.jsx)(s.code,{children:"1-opaque.ts"})," et ",(0,i.jsx)(s.code,{children:"utils.ts"})," pour l'impl\xe9mentation."]}),"\n",(0,i.jsx)(s.p,{children:"\xc0 vous de jouer !"}),"\n",(0,i.jsx)(s.admonition,{title:"Ressources",type:"tip",children:(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"/typescript-workshop-companion/docs/typescript/typage-structurel",children:"Typage structurel"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"/typescript-workshop-companion/docs/typescript/generic",children:"Types g\xe9n\xe9riques"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"/typescript-workshop-companion/docs/typescript/template-literal",children:"Template literal"})}),"\n"]})}),"\n",(0,i.jsx)(s.h2,{id:"indice-1",children:"Indice 1"}),"\n",(0,i.jsxs)(n,{children:[(0,i.jsx)("summary",{children:"N'oubliez pas que le systeme de type est un langage"}),(0,i.jsxs)(s.p,{children:["Essayer d'imaginer l'impl\xe9mentation si ",(0,i.jsx)(s.code,{children:"UUID"})," et ",(0,i.jsx)(s.code,{children:"Opaque"})," \xe9taient des fonctions JavaScript."]})]}),"\n",(0,i.jsx)(s.h2,{id:"solution",children:"Solution"}),"\n",(0,i.jsxs)(n,{children:[(0,i.jsx)("summary",{children:"Avant de d\xe9plier pour afficher la solution, n'h\xe9sitez pas \xe0 nous solliciter ! "}),(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-ts",children:"export type UUID<T extends string> = Opaque<string, `${T}_uuid`>;\n"})})]})]})}function p(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>o,x:()=>c});var t=n(6540);const i={},r=t.createContext(i);function o(e){const s=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(r.Provider,{value:s},e.children)}}}]);