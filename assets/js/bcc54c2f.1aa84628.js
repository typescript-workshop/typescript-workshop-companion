"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[509],{1998:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>p,frontMatter:()=>r,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"atelier/selectionner-des-champs","title":"Exercice 4","description":"Nous vous proposons de typer la fonction selectFields qui, \xe0 partir du typage de notre database, sera capable d\'inf\xe9rer les noms des champs qu\'il est possible de selectionner au sein d\'une table.","source":"@site/docs/atelier/4-selectionner-des-champs.md","sourceDirName":"atelier","slug":"/atelier/selectionner-des-champs","permalink":"/typescript-workshop-companion/docs/atelier/selectionner-des-champs","draft":false,"unlisted":false,"editUrl":"https://github.com/typescript-workshop/typescript-workshop-companion/tree/main/packages/create-docusaurus/templates/shared/docs/atelier/4-selectionner-des-champs.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Exercice 3","permalink":"/typescript-workshop-companion/docs/atelier/selectionner-une-table"},"next":{"title":"Exercice 5","permalink":"/typescript-workshop-companion/docs/atelier/selectionner-tous-les-champs"}}');var o=t(4848),i=t(8453);const r={sidebar_position:4},c="Exercice 4",l={},a=[{value:"Indice 1",id:"indice-1",level:2},{value:"Solution",id:"solution",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components},{Details:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"exercice-4",children:"Exercice 4"})}),"\n",(0,o.jsxs)(n.p,{children:["Nous vous proposons de typer la fonction ",(0,o.jsx)(n.code,{children:"selectFields"})," qui, \xe0 partir du typage de notre database, sera capable d'inf\xe9rer les noms des champs qu'il est possible de selectionner au sein d'une table."]}),"\n",(0,o.jsx)(n.p,{children:"Rendez-vous dans le fichier 4-selectionner-des-champs.spec-d.ts et db.ts pour l'impl\xe9mentation."}),"\n",(0,o.jsx)(n.p,{children:"\xc0 vous de jouer !"}),"\n",(0,o.jsx)(n.admonition,{title:"Ressources",type:"tip",children:(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"/typescript-workshop-companion/docs/typescript/generic",children:"Types g\xe9n\xe9riques"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"/typescript-workshop-companion/docs/typescript/conditional-types",children:"Types conditionnels"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"/typescript-workshop-companion/docs/typescript/keyof-lookup",children:"KeyOf & lookup"})}),"\n"]})}),"\n",(0,o.jsx)(n.h2,{id:"indice-1",children:"Indice 1"}),"\n",(0,o.jsxs)(t,{children:[(0,o.jsx)("summary",{children:"Avant de d\xe9plier pour afficher la solution, n'h\xe9sitez pas \xe0 nous solliciter ! "}),(0,o.jsx)(n.p,{children:"On est dans le m\xeame genre de cas qu'\xe0 l'\xe9tape pr\xe9c\xe9dente, simplement cette fois-ci on veut pouvoir inf\xe9rer le types de propri\xe9t\xe9s nich\xe9es un peu plus profond\xe9ment que les noms des tables."}),(0,o.jsxs)(n.p,{children:["Suite \xe0 l'invocation de ",(0,o.jsx)(n.code,{children:"selectFrom"})," on dispose, dans notre ",(0,o.jsx)(n.em,{children:"contexte"})," d'un peu plus d'information : on sait que nous construisons une operation ",(0,o.jsx)(n.code,{children:"select"})," et surtout quelle table nous allons interroger. Fort de cette information il est possible d'extraire depuis le ",(0,o.jsx)(n.em,{children:"contexte"})," les noms de champs de la table cibl\xe9e."]})]}),"\n",(0,o.jsx)(n.h2,{id:"solution",children:"Solution"}),"\n",(0,o.jsxs)(t,{children:[(0,o.jsx)("summary",{children:"Avant de d\xe9plier pour afficher la solution, n'h\xe9sitez pas \xe0 nous solliciter ! "}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:'type SelectableContext<DB> = EmptyContext<DB> & {\n  _operation: "select";\n  _table: keyof DB;\n};\ntype AnySelectableContext = SelectableContext<any>;\nexport const selectFields = <Ctx extends AnySelectableContext>(\n  ctx: Ctx,\n  fieldNames: (keyof Ctx["_db"][Ctx["_table"]])[]\n) => ({\n  ...ctx,\n  _fields: fieldNames,\n});\n'})})]})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>c});var s=t(6540);const o={},i=s.createContext(o);function r(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);