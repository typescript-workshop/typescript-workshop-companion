"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[968],{7394:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"atelier/supprimer-des-lignes","title":"Exercice 7","description":"L\'objectif de cet atelier est de cr\xe9er un builder de requ\xeates SQL. Les exercices pr\xe9c\xe9dents nous ont permis de s\xe9lectionner, filtrer, mais nous ne sommes pas encore capables de s\xe9lectionner des donn\xe9es \xe0 supprimer, pourtant, \xe7a serait canon !","source":"@site/docs/atelier/7-supprimer-des-lignes.md","sourceDirName":"atelier","slug":"/atelier/supprimer-des-lignes","permalink":"/typescript-workshop-companion/docs/atelier/supprimer-des-lignes","draft":false,"unlisted":false,"editUrl":"https://github.com/typescript-workshop/typescript-workshop-companion/tree/main/packages/create-docusaurus/templates/shared/docs/atelier/7-supprimer-des-lignes.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7},"sidebar":"tutorialSidebar","previous":{"title":"Exercice 6","permalink":"/typescript-workshop-companion/docs/atelier/filtrer-des-lignes"},"next":{"title":"Exercice 8","permalink":"/typescript-workshop-companion/docs/atelier/gestion-des-alias"}}');var r=t(4848),i=t(8453);const o={sidebar_position:7},c="Exercice 7",l={},d=[{value:"Indice 1",id:"indice-1",level:2},{value:"Indice 2",id:"indice-2",level:2},{value:"Solution",id:"solution",level:2}];function a(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components},{Details:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"exercice-7",children:"Exercice 7"})}),"\n",(0,r.jsx)(n.p,{children:"L'objectif de cet atelier est de cr\xe9er un builder de requ\xeates SQL. Les exercices pr\xe9c\xe9dents nous ont permis de s\xe9lectionner, filtrer, mais nous ne sommes pas encore capables de s\xe9lectionner des donn\xe9es \xe0 supprimer, pourtant, \xe7a serait canon !"}),"\n",(0,r.jsxs)(n.p,{children:["Rem\xe9dions \xe0 cela en cr\xe9ant notre ",(0,r.jsx)(n.code,{children:"deleteFrom"}),". Rendez-vous dans le fichier ",(0,r.jsx)(n.code,{children:"7-supprimer-des-lignes.ts"})," et ",(0,r.jsx)(n.code,{children:"db.ts"})," pour l'impl\xe9mentation."]}),"\n",(0,r.jsx)(n.p,{children:"\xc0 vous de jouer ! \ud83c\udf89"}),"\n",(0,r.jsx)(n.admonition,{title:"Ressources",type:"tip",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/typescript-workshop-companion/docs/typescript/generic",children:"Types g\xe9n\xe9riques"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/typescript-workshop-companion/docs/typescript/keyof-lookup",children:"Keyof & lookup"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/typescript-workshop-companion/docs/typescript/type-hierarchy",children:"Hi\xe9rarchie des types"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/typescript-workshop-companion/docs/typescript/conditional-types",children:"Types conditionnels"})}),"\n"]})}),"\n",(0,r.jsx)(n.h2,{id:"indice-1",children:"Indice 1"}),"\n",(0,r.jsxs)(t,{children:[(0,r.jsx)("summary",{children:"Choix de l'op\xe9ration"}),(0,r.jsxs)(n.p,{children:["On peut s'attendre \xe0 ce que ",(0,r.jsx)(n.code,{children:"deleteFrom"})," op\xe8re dans un contexte similaire \xe0 ",(0,r.jsx)(n.code,{children:"selectFrom"}),". D'ailleurs la seule diff\xe9rence est que cette fonction viendra enrichir le contexte qui lui est fourni avec un ",(0,r.jsx)(n.em,{children:"autre type d'op\xe9ration"}),"."]})]}),"\n",(0,r.jsx)(n.h2,{id:"indice-2",children:"Indice 2"}),"\n",(0,r.jsxs)(t,{children:[(0,r.jsxs)("summary",{children:["Jusqu'",(0,r.jsx)(n.strong,{children:"o\xf9"})," cela nous m\xe8ne"]}),(0,r.jsxs)(n.p,{children:["On avait typ\xe9 la fonction ",(0,r.jsx)(n.code,{children:"where"})," pour qu'elle op\xe8re \xe0 partir d'un ",(0,r.jsx)(n.em,{children:"contexte"})," de ",(0,r.jsx)(n.strong,{children:"s\xe9lection"}),". Il faut \xe0 pr\xe9sent prendre en compte qu'elle peut \xe9galement op\xe9rer dans un contexte de ",(0,r.jsx)(n.strong,{children:"suppression"})]})]}),"\n",(0,r.jsx)(n.h2,{id:"solution",children:"Solution"}),"\n",(0,r.jsxs)(t,{children:[(0,r.jsx)("summary",{children:"Avant de d\xe9plier pour afficher la solution, n'h\xe9sitez pas \xe0 nous solliciter ! "}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'type DeletableContext<DB> = EmptyContext<DB> & {\n  _operation: "delete";\n  _table: keyof DB;\n};\n\nexport const deleteFrom = <\n  Ctx extends AnyEmptyContext,\n  TB extends keyof Ctx["$db"]\n>(\n  ctx: Ctx,\n  tableName: TB\n) => ({\n  ...ctx,\n  _operation: "delete" as const,\n  _table: tableName,\n});\n'})}),(0,r.jsxs)(n.p,{children:["Il faudra aussi modifier la signature de ",(0,r.jsx)(n.code,{children:"where"})," pour qu'elle accepte \xe9galement un ",(0,r.jsx)(n.code,{children:"DeletableContext"}),"."]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'type AnyQueryableContext = SelectableContext<any> | DeletableContext<any>;\n\nexport const where = <\n  Ctx extends AnyQueryableContext,\n  Field extends keyof Ctx["$db"][Ctx["_table"]]\n>(...) => {...}\n'})})]})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>c});var s=t(6540);const r={},i=s.createContext(r);function o(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);